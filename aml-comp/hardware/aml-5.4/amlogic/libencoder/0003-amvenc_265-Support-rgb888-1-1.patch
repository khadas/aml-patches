From 526e411d5fa92092c27cce7c3a56ef41abb8ec47 Mon Sep 17 00:00:00 2001
From: "xiaoya.lin" <xiaoya.lin@amlogic.com>
Date: Wed, 19 Jul 2023 13:52:22 +0800
Subject: [PATCH 3/4] amvenc_265: Support rgb888 [1/1]

PD#SWPL-132055

Problem:
Support rgb888

Solution:
Support rgb888

Verify:
Local

Signed-off-by: xiaoya.lin <xiaoya.lin@amlogic.com>
Change-Id: I3ecb957a6ae34cbe6910e8c19de9415cc18b3e8f
---
 amvenc_265/EncoderAPI-HEVC/hevc_enc/AML_HEVCEncoder.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/amvenc_265/EncoderAPI-HEVC/hevc_enc/AML_HEVCEncoder.cpp b/amvenc_265/EncoderAPI-HEVC/hevc_enc/AML_HEVCEncoder.cpp
index 3a7f76d..2a83186 100644
--- a/amvenc_265/EncoderAPI-HEVC/hevc_enc/AML_HEVCEncoder.cpp
+++ b/amvenc_265/EncoderAPI-HEVC/hevc_enc/AML_HEVCEncoder.cpp
@@ -992,7 +992,7 @@ AMVEnc_Status AML_HEVCSetInput(amv_enc_handle_hevc_t ctx_handle, AMVHEVCEncFrame
                 //memcpy((void *) ((char *)ctx->amlge2d.ge2dinfo.src_info[0].vaddr[0] + input->pitch * input->height), (void *)input->YCbCr[1], input->pitch * input->height / 4);
                 //memcpy((void *) ((char *)ctx->amlge2d.ge2dinfo.src_info[0].vaddr[0] + (input->pitch * input->height * 5) /4), (void *)input->YCbCr[2], input->pitch * input->height / 4);
             } else if (ctx->fmt == AMVENC_RGB888) {
-                //memcpy((void *)ctx->amlge2d.ge2dinfo.src_info[0].vaddr[0], (void *)input->YCbCr[0], input->pitch * input->height * 3);
+                memcpy((void *)ctx->amlge2d.ge2dinfo.src_info[0].vaddr[0], (void *)input->YCbCr[0], input->pitch * input->height * 3);
             }
 
             do_strechblit(&ctx->amlge2d.ge2dinfo, input);
-- 
2.25.1

