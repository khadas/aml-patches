From 1baf1b582684c4950d4f11a6d1a3e846941a970a Mon Sep 17 00:00:00 2001
From: Terrence Pu <terrence.pu@amlogic.com>
Date: Wed, 22 Jul 2020 20:26:13 -0700
Subject: [PATCH 2/2] Revert "media_module: clean no license source file [1/1]"

This reverts commit 298354b539ae5b9497ca6f09382a9e018e7fc635.

Change-Id: Ic09805df170091052d4417cfea4c835e90833da0
---
 drivers/amvdec_ports/Makefile                 |   4 +-
 .../amvdec_ports/decoder/aml_h264_parser.c    |  19 ----
 .../amvdec_ports/decoder/aml_h264_parser.h    |   9 --
 .../amvdec_ports/decoder/aml_hevc_parser.c    |  19 ----
 .../amvdec_ports/decoder/aml_hevc_parser.h    |   7 +-
 .../amvdec_ports/decoder/aml_mjpeg_parser.c   |  19 ----
 .../amvdec_ports/decoder/aml_mjpeg_parser.h   |  30 +-----
 .../amvdec_ports/decoder/aml_mpeg12_parser.c  |  19 ----
 .../amvdec_ports/decoder/aml_mpeg12_parser.h  |  24 +----
 .../amvdec_ports/decoder/aml_mpeg4_parser.c   |  19 ----
 .../amvdec_ports/decoder/aml_mpeg4_parser.h   |  28 +----
 drivers/amvdec_ports/decoder/aml_vp9_parser.c |  19 ----
 drivers/amvdec_ports/decoder/aml_vp9_parser.h |  12 +--
 drivers/amvdec_ports/utils/common.c           |  21 ----
 drivers/amvdec_ports/utils/common.h           | 101 +-----------------
 drivers/common/media_clock/clk/clk.h          |   3 -
 drivers/fake_video_out/fake_video.c           |  19 ----
 drivers/frame_provider/decoder/utils/amvdec.c |   2 +-
 drivers/frame_provider/decoder/utils/utils.c  |   3 -
 .../frame_provider/decoder/utils/vdec_sync.c  |  19 ----
 .../frame_provider/decoder/utils/vdec_sync.h  |  19 ----
 .../decoder/utils/vdec_v4l2_buffer_ops.c      |  19 ----
 .../decoder/utils/vdec_v4l2_buffer_ops.h      |  19 ----
 .../decoder/vav1/aom_av1_define.h             |  19 ----
 .../frame_provider/decoder/vav1/av1_bufmgr.c  |  19 ----
 .../frame_provider/decoder/vav1/av1_global.h  |  19 ----
 drivers/frame_sink/encoder/jpeg/jpegenc.h     |  16 ---
 .../stream_input/parser/dvb_ci/aml_pcmcia.c   |  20 +---
 .../dvb_ci/cimax/usb/SRC/cimax+usb-driver.c   |   1 -
 29 files changed, 13 insertions(+), 534 deletions(-)

diff --git a/drivers/amvdec_ports/Makefile b/drivers/amvdec_ports/Makefile
index 4642cde..79740e1 100644
--- a/drivers/amvdec_ports/Makefile
+++ b/drivers/amvdec_ports/Makefile
@@ -12,7 +12,6 @@ amvdec_ports-objs += decoder/vdec_vp9_if.o
 amvdec_ports-objs += decoder/vdec_mpeg12_if.o
 amvdec_ports-objs += decoder/vdec_mpeg4_if.o
 amvdec_ports-objs += decoder/vdec_mjpeg_if.o
-ifdef CONFIG_AMLOGIC_MEDIA_V4L_SOFTWARE_PARSER
 amvdec_ports-objs += decoder/aml_h264_parser.o
 amvdec_ports-objs += decoder/aml_hevc_parser.o
 amvdec_ports-objs += decoder/aml_vp9_parser.o
@@ -20,5 +19,4 @@ amvdec_ports-objs += decoder/aml_mpeg12_parser.o
 amvdec_ports-objs += decoder/aml_mpeg4_parser.o
 amvdec_ports-objs += decoder/aml_mjpeg_parser.o
 amvdec_ports-objs += utils/golomb.o
-endif
-amvdec_ports-objs += utils/common.o
\ No newline at end of file
+amvdec_ports-objs += utils/common.o
diff --git a/drivers/amvdec_ports/decoder/aml_h264_parser.c b/drivers/amvdec_ports/decoder/aml_h264_parser.c
index c9da299..d0d0198 100644
--- a/drivers/amvdec_ports/decoder/aml_h264_parser.c
+++ b/drivers/amvdec_ports/decoder/aml_h264_parser.c
@@ -1,22 +1,3 @@
-/*
-* Copyright (C) 2017 Amlogic, Inc. All rights reserved.
-*
-* This program is free software; you can redistribute it and/or modify
-* it under the terms of the GNU General Public License as published by
-* the Free Software Foundation; either version 2 of the License, or
-* (at your option) any later version.
-*
-* This program is distributed in the hope that it will be useful, but WITHOUT
-* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
-* FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
-* more details.
-*
-* You should have received a copy of the GNU General Public License along
-* with this program; if not, write to the Free Software Foundation, Inc.,
-* 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
-*
-* Description:
-*/
 #include <linux/kernel.h>
 #include <linux/types.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/amvdec_ports/decoder/aml_h264_parser.h b/drivers/amvdec_ports/decoder/aml_h264_parser.h
index def00dd..aed5378 100644
--- a/drivers/amvdec_ports/decoder/aml_h264_parser.h
+++ b/drivers/amvdec_ports/decoder/aml_h264_parser.h
@@ -19,9 +19,7 @@
 #define AML_H264_PARSER_H
 
 #include "../aml_vcodec_drv.h"
-#ifdef CONFIG_AMLOGIC_MEDIA_V4L_SOFTWARE_PARSER
 #include "../utils/pixfmt.h"
-#endif
 
 #define QP_MAX_NUM (51 + 6 * 6)           // The maximum supported qp
 
@@ -130,11 +128,9 @@ struct h264_SPS_t {
 	int video_signal_type_present_flag;
 	int full_range;
 	int colour_description_present_flag;
-#ifdef CONFIG_AMLOGIC_MEDIA_V4L_SOFTWARE_PARSER
 	enum AVColorPrimaries color_primaries;
 	enum AVColorTransferCharacteristic color_trc;
 	enum AVColorSpace colorspace;
-#endif
 	int timing_info_present_flag;
 	u32 num_units_in_tick;
 	u32 time_scale;
@@ -199,12 +195,7 @@ struct h264_param_sets {
 	struct h264_PPS_t pps;
 };
 
-
-#ifdef CONFIG_AMLOGIC_MEDIA_V4L_SOFTWARE_PARSER
 int h264_decode_extradata_ps(u8 *data, int size, struct h264_param_sets *ps);
-#else
-inline int h264_decode_extradata_ps(u8 *data, int size, struct h264_param_sets *ps) { return -1; }
-#endif
 
 #endif /* AML_H264_PARSER_H */
 
diff --git a/drivers/amvdec_ports/decoder/aml_hevc_parser.c b/drivers/amvdec_ports/decoder/aml_hevc_parser.c
index 4ea76b9..24977a8 100644
--- a/drivers/amvdec_ports/decoder/aml_hevc_parser.c
+++ b/drivers/amvdec_ports/decoder/aml_hevc_parser.c
@@ -1,22 +1,3 @@
-/*
-* Copyright (C) 2017 Amlogic, Inc. All rights reserved.
-*
-* This program is free software; you can redistribute it and/or modify
-* it under the terms of the GNU General Public License as published by
-* the Free Software Foundation; either version 2 of the License, or
-* (at your option) any later version.
-*
-* This program is distributed in the hope that it will be useful, but WITHOUT
-* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
-* FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
-* more details.
-*
-* You should have received a copy of the GNU General Public License along
-* with this program; if not, write to the Free Software Foundation, Inc.,
-* 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
-*
-* Description:
-*/
 #include <linux/kernel.h>
 #include <linux/types.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/amvdec_ports/decoder/aml_hevc_parser.h b/drivers/amvdec_ports/decoder/aml_hevc_parser.h
index 9223639..f55c381 100644
--- a/drivers/amvdec_ports/decoder/aml_hevc_parser.h
+++ b/drivers/amvdec_ports/decoder/aml_hevc_parser.h
@@ -282,9 +282,8 @@ struct HEVCWindow {
 };
 
 struct VUI {
-#ifdef CONFIG_AMLOGIC_MEDIA_V4L_SOFTWARE_PARSER
 	struct AVRational sar;
-#endif
+
 	int overscan_info_present_flag;
 	int overscan_appropriate_flag;
 
@@ -552,11 +551,7 @@ struct h265_param_sets {
 	struct h265_PPS_t pps;
 };
 
-#ifdef CONFIG_AMLOGIC_MEDIA_V4L_SOFTWARE_PARSER
 int h265_decode_extradata_ps(u8 *data, int size, struct h265_param_sets *ps);
-#else
-inline int h265_decode_extradata_ps(u8 *data, int size, struct h265_param_sets *ps) { return -1; }
-#endif
 
 #endif /* AML_HEVC_PARSER_H */
 
diff --git a/drivers/amvdec_ports/decoder/aml_mjpeg_parser.c b/drivers/amvdec_ports/decoder/aml_mjpeg_parser.c
index fd56755..c582ab0 100644
--- a/drivers/amvdec_ports/decoder/aml_mjpeg_parser.c
+++ b/drivers/amvdec_ports/decoder/aml_mjpeg_parser.c
@@ -1,22 +1,3 @@
-/*
-* Copyright (C) 2017 Amlogic, Inc. All rights reserved.
-*
-* This program is free software; you can redistribute it and/or modify
-* it under the terms of the GNU General Public License as published by
-* the Free Software Foundation; either version 2 of the License, or
-* (at your option) any later version.
-*
-* This program is distributed in the hope that it will be useful, but WITHOUT
-* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
-* FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
-* more details.
-*
-* You should have received a copy of the GNU General Public License along
-* with this program; if not, write to the Free Software Foundation, Inc.,
-* 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
-*
-* Description:
-*/
 #include <linux/kernel.h>
 #include <linux/types.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/amvdec_ports/decoder/aml_mjpeg_parser.h b/drivers/amvdec_ports/decoder/aml_mjpeg_parser.h
index bbc9282..cc4c453 100644
--- a/drivers/amvdec_ports/decoder/aml_mjpeg_parser.h
+++ b/drivers/amvdec_ports/decoder/aml_mjpeg_parser.h
@@ -1,27 +1,11 @@
-/*
- * drivers/amvdec_ports/decoder/aml_mjpeg_parser.h
- *
- * Copyright (C) 2015 Amlogic, Inc. All rights reserved.
- *
- * This program is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful, but WITHOUT
- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
- * more details.
- *
- */
-#ifndef AML_MJPEG_PARSER_H
-#define AML_MJPEG_PARSER_H
+#ifndef AML_MPEG12_PARSER_H
+#define AML_MPEG12_PARSER_H
 
 #include "../aml_vcodec_drv.h"
+#include "../utils/pixfmt.h"
 #include "../utils/common.h"
-#ifdef CONFIG_AMLOGIC_MEDIA_V4L_SOFTWARE_PARSER
 #include "../utils/get_bits.h"
-#endif
+#include "../utils/put_bits.h"
 
 #define FF_PROFILE_MJPEG_HUFFMAN_BASELINE_DCT            0xc0
 #define FF_PROFILE_MJPEG_HUFFMAN_EXTENDED_SEQUENTIAL_DCT 0xc1
@@ -123,9 +107,7 @@ struct VLC {
 };
 
 struct MJpegDecodeContext {
-#ifdef CONFIG_AMLOGIC_MEDIA_V4L_SOFTWARE_PARSER
 	struct get_bits_context gb;
-#endif
 	int buf_size;
 
 	int start_code; /* current start code */
@@ -177,10 +159,6 @@ struct mjpeg_param_sets {
 	struct MJpegDecodeContext dec_ps;
 };
 
-#ifdef CONFIG_AMLOGIC_MEDIA_V4L_SOFTWARE_PARSER
 int mjpeg_decode_extradata_ps(u8 *buf, int size, struct mjpeg_param_sets *ps);
-#else
-inline int mjpeg_decode_extradata_ps(u8 *buf, int size, struct mjpeg_param_sets *ps) { return -1; }
-#endif
 
 #endif
diff --git a/drivers/amvdec_ports/decoder/aml_mpeg12_parser.c b/drivers/amvdec_ports/decoder/aml_mpeg12_parser.c
index 2720446..748a83f 100644
--- a/drivers/amvdec_ports/decoder/aml_mpeg12_parser.c
+++ b/drivers/amvdec_ports/decoder/aml_mpeg12_parser.c
@@ -1,22 +1,3 @@
-/*
-* Copyright (C) 2017 Amlogic, Inc. All rights reserved.
-*
-* This program is free software; you can redistribute it and/or modify
-* it under the terms of the GNU General Public License as published by
-* the Free Software Foundation; either version 2 of the License, or
-* (at your option) any later version.
-*
-* This program is distributed in the hope that it will be useful, but WITHOUT
-* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
-* FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
-* more details.
-*
-* You should have received a copy of the GNU General Public License along
-* with this program; if not, write to the Free Software Foundation, Inc.,
-* 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
-*
-* Description:
-*/
 #include <linux/kernel.h>
 #include <linux/types.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/amvdec_ports/decoder/aml_mpeg12_parser.h b/drivers/amvdec_ports/decoder/aml_mpeg12_parser.h
index 1af2919..203bb51 100644
--- a/drivers/amvdec_ports/decoder/aml_mpeg12_parser.h
+++ b/drivers/amvdec_ports/decoder/aml_mpeg12_parser.h
@@ -1,27 +1,9 @@
-/*
- * drivers/amvdec_ports/decoder/aml_mpeg12_parser.h
- *
- * Copyright (C) 2015 Amlogic, Inc. All rights reserved.
- *
- * This program is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful, but WITHOUT
- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
- * more details.
- *
- */
 #ifndef AML_MPEG12_PARSER_H
 #define AML_MPEG12_PARSER_H
 
 #include "../aml_vcodec_drv.h"
-#include "../utils/common.h"
-#ifdef CONFIG_AMLOGIC_MEDIA_V4L_SOFTWARE_PARSER
 #include "../utils/pixfmt.h"
-#endif
+#include "../utils/common.h"
 
 /* Start codes. */
 #define SEQ_END_CODE            0x000001b7
@@ -88,10 +70,6 @@ struct mpeg12_param_sets {
 	struct MpvParseContext dec_ps;
 };
 
-#ifdef CONFIG_AMLOGIC_MEDIA_V4L_SOFTWARE_PARSER
 int mpeg12_decode_extradata_ps(u8 *buf, int size, struct mpeg12_param_sets *ps);
-#else
-inline int mpeg12_decode_extradata_ps(u8 *buf, int size, struct mpeg12_param_sets *ps) { return -1; }
-#endif
 
 #endif
diff --git a/drivers/amvdec_ports/decoder/aml_mpeg4_parser.c b/drivers/amvdec_ports/decoder/aml_mpeg4_parser.c
index f680b12..9c47c08 100644
--- a/drivers/amvdec_ports/decoder/aml_mpeg4_parser.c
+++ b/drivers/amvdec_ports/decoder/aml_mpeg4_parser.c
@@ -1,22 +1,3 @@
-/*
-* Copyright (C) 2017 Amlogic, Inc. All rights reserved.
-*
-* This program is free software; you can redistribute it and/or modify
-* it under the terms of the GNU General Public License as published by
-* the Free Software Foundation; either version 2 of the License, or
-* (at your option) any later version.
-*
-* This program is distributed in the hope that it will be useful, but WITHOUT
-* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
-* FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
-* more details.
-*
-* You should have received a copy of the GNU General Public License along
-* with this program; if not, write to the Free Software Foundation, Inc.,
-* 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
-*
-* Description:
-*/
 #include <linux/kernel.h>
 #include <linux/types.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/amvdec_ports/decoder/aml_mpeg4_parser.h b/drivers/amvdec_ports/decoder/aml_mpeg4_parser.h
index 3e5bf62..09f392d 100644
--- a/drivers/amvdec_ports/decoder/aml_mpeg4_parser.h
+++ b/drivers/amvdec_ports/decoder/aml_mpeg4_parser.h
@@ -1,27 +1,9 @@
-/*
- * drivers/amvdec_ports/decoder/aml_mpeg4_parser.h
- *
- * Copyright (C) 2015 Amlogic, Inc. All rights reserved.
- *
- * This program is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful, but WITHOUT
- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
- * more details.
- *
- */
 #ifndef AVCODEC_MPEG4VIDEO_H
 #define AVCODEC_MPEG4VIDEO_H
 
 #include "../aml_vcodec_drv.h"
-#include "../utils/common.h"
-#ifdef CONFIG_AMLOGIC_MEDIA_V4L_SOFTWARE_PARSER
 #include "../utils/pixfmt.h"
-#endif
+#include "../utils/common.h"
 
 //mpeg4 profile
 #define FF_PROFILE_MPEG4_SIMPLE                     0
@@ -241,15 +223,13 @@ struct mpeg4_dec_param {
 
 	struct AVRational time_base;
 	int ticks_per_frame;
+	enum AVPixelFormat pix_fmt;
 	struct AVRational sample_aspect_ratio;
 	enum AVColorPrimaries color_primaries;
 	enum AVColorTransferCharacteristic color_trc;
 	enum AVColorSpace colorspace;
-#ifdef CONFIG_AMLOGIC_MEDIA_V4L_SOFTWARE_PARSER
-	enum AVPixelFormat pix_fmt;
 	enum AVColorRange color_range;
 	enum AVChromaLocation chroma_sample_location;
-#endif
 	int err_recognition;
 	int idct_algo;
 	int bits_per_raw_sample;
@@ -265,11 +245,7 @@ struct mpeg4_param_sets {
 	struct mpeg4_dec_param dec_ps;
 };
 
-#ifdef CONFIG_AMLOGIC_MEDIA_V4L_SOFTWARE_PARSER
 int mpeg4_decode_extradata_ps(u8 *buf, int size, struct mpeg4_param_sets *ps);
-#else
-inline int mpeg4_decode_extradata_ps(u8 *buf, int size, struct mpeg4_param_sets *ps) { return -1; }
-#endif
 
 #endif
 
diff --git a/drivers/amvdec_ports/decoder/aml_vp9_parser.c b/drivers/amvdec_ports/decoder/aml_vp9_parser.c
index b027b8a..21d5283 100644
--- a/drivers/amvdec_ports/decoder/aml_vp9_parser.c
+++ b/drivers/amvdec_ports/decoder/aml_vp9_parser.c
@@ -1,22 +1,3 @@
-/*
-* Copyright (C) 2017 Amlogic, Inc. All rights reserved.
-*
-* This program is free software; you can redistribute it and/or modify
-* it under the terms of the GNU General Public License as published by
-* the Free Software Foundation; either version 2 of the License, or
-* (at your option) any later version.
-*
-* This program is distributed in the hope that it will be useful, but WITHOUT
-* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
-* FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
-* more details.
-*
-* You should have received a copy of the GNU General Public License along
-* with this program; if not, write to the Free Software Foundation, Inc.,
-* 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
-*
-* Description:
-*/
 #include <linux/kernel.h>
 #include <linux/types.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/amvdec_ports/decoder/aml_vp9_parser.h b/drivers/amvdec_ports/decoder/aml_vp9_parser.h
index 4a90557..c016eba 100644
--- a/drivers/amvdec_ports/decoder/aml_vp9_parser.h
+++ b/drivers/amvdec_ports/decoder/aml_vp9_parser.h
@@ -19,10 +19,8 @@
 #define AML_VP9_PARSER_H
 
 #include "../aml_vcodec_drv.h"
-#ifdef CONFIG_AMLOGIC_MEDIA_V4L_SOFTWARE_PARSER
 #include "../utils/pixfmt.h"
 #include "../utils/get_bits.h"
-#endif
 
 #define MAX_SEGMENT	8
 
@@ -99,9 +97,7 @@ struct VP9SharedContext {
 
 struct VP9Context {
 	struct VP9SharedContext s;
-#ifdef CONFIG_AMLOGIC_MEDIA_V4L_SOFTWARE_PARSER
 	struct get_bits_context gb;
-#endif
 	int pass, active_tile_cols;
 
 	u8 ss_h, ss_v;
@@ -116,9 +112,8 @@ struct VP9Context {
 
 	int render_width;
 	int render_height;
-#ifdef CONFIG_AMLOGIC_MEDIA_V4L_SOFTWARE_PARSER
+
 	enum AVPixelFormat pix_fmt, last_fmt, gf_fmt;
-#endif
 	u32 sb_cols, sb_rows, rows, cols;
 
 	struct {
@@ -175,11 +170,6 @@ struct vp9_param_sets {
 };
 
 int vp9_superframe_split_filter(struct vp9_superframe_split *s);
-
-#ifdef CONFIG_AMLOGIC_MEDIA_V4L_SOFTWARE_PARSER
 int vp9_decode_extradata_ps(u8 *data, int size, struct vp9_param_sets *ps);
-#else
-inline int vp9_decode_extradata_ps(u8 *data, int size, struct vp9_param_sets *ps) { return -1; }
-#endif
 
 #endif //AML_VP9_PARSER_H
diff --git a/drivers/amvdec_ports/utils/common.c b/drivers/amvdec_ports/utils/common.c
index 1d621da..aa5c71b 100644
--- a/drivers/amvdec_ports/utils/common.c
+++ b/drivers/amvdec_ports/utils/common.c
@@ -1,22 +1,3 @@
-/*
-* Copyright (C) 2017 Amlogic, Inc. All rights reserved.
-*
-* This program is free software; you can redistribute it and/or modify
-* it under the terms of the GNU General Public License as published by
-* the Free Software Foundation; either version 2 of the License, or
-* (at your option) any later version.
-*
-* This program is distributed in the hope that it will be useful, but WITHOUT
-* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
-* FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
-* more details.
-*
-* You should have received a copy of the GNU General Public License along
-* with this program; if not, write to the Free Software Foundation, Inc.,
-* 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
-*
-* Description:
-*/
 #include <linux/kernel.h>
 #include <linux/types.h>
 #include <linux/vmalloc.h>
@@ -24,9 +5,7 @@
 #include <linux/string.h>
 
 #include "common.h"
-#ifdef CONFIG_AMLOGIC_MEDIA_V4L_SOFTWARE_PARSER
 #include "pixfmt.h"
-#endif
 
 const u8 ff_zigzag_direct[64] = {
 	0,  1,  8, 16, 9, 2, 3, 10,
diff --git a/drivers/amvdec_ports/utils/common.h b/drivers/amvdec_ports/utils/common.h
index 8ca3059..9540e28 100644
--- a/drivers/amvdec_ports/utils/common.h
+++ b/drivers/amvdec_ports/utils/common.h
@@ -1,28 +1,7 @@
-/*
-* Copyright (C) 2017 Amlogic, Inc. All rights reserved.
-*
-* This program is free software; you can redistribute it and/or modify
-* it under the terms of the GNU General Public License as published by
-* the Free Software Foundation; either version 2 of the License, or
-* (at your option) any later version.
-*
-* This program is distributed in the hope that it will be useful, but WITHOUT
-* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
-* FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
-* more details.
-*
-* You should have received a copy of the GNU General Public License along
-* with this program; if not, write to the Free Software Foundation, Inc.,
-* 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
-*
-* Description:
-*/
 #ifndef UTILS_COMMON_H
 #define UTILS_COMMON_H
 
-#ifdef CONFIG_AMLOGIC_MEDIA_V4L_SOFTWARE_PARSER
 #include "pixfmt.h"
-#endif
 
 #define AV_INPUT_BUFFER_PADDING_SIZE	64
 #define MIN_CACHE_BITS			64
@@ -74,85 +53,6 @@ struct AVRational{
 	int den; ///< denominator
 };
 
-#ifndef CONFIG_AMLOGIC_MEDIA_V4L_SOFTWARE_PARSER
-/**
- * YUV colorspace type.
- * These values match the ones defined by ISO/IEC 23001-8_2013 § 7.3.
- */
-enum AVColorSpace {
-	AVCOL_SPC_RGB         = 0,  ///< order of coefficients is actually GBR, also IEC 61966-2-1 (sRGB)
-	AVCOL_SPC_BT709       = 1,  ///< also ITU-R BT1361 / IEC 61966-2-4 xvYCC709 / SMPTE RP177 Annex B
-	AVCOL_SPC_UNSPECIFIED = 2,
-	AVCOL_SPC_RESERVED    = 3,
-	AVCOL_SPC_FCC         = 4,  ///< FCC Title 47 Code of Federal Regulations 73.682 (a)(20)
-	AVCOL_SPC_BT470BG     = 5,  ///< also ITU-R BT601-6 625 / ITU-R BT1358 625 / ITU-R BT1700 625 PAL & SECAM / IEC 61966-2-4 xvYCC601
-	AVCOL_SPC_SMPTE170M   = 6,  ///< also ITU-R BT601-6 525 / ITU-R BT1358 525 / ITU-R BT1700 NTSC
-	AVCOL_SPC_SMPTE240M   = 7,  ///< functionally identical to above
-	AVCOL_SPC_YCGCO       = 8,  ///< Used by Dirac / VC-2 and H.264 FRext, see ITU-T SG16
-	AVCOL_SPC_YCOCG       = AVCOL_SPC_YCGCO,
-	AVCOL_SPC_BT2020_NCL  = 9,  ///< ITU-R BT2020 non-constant luminance system
-	AVCOL_SPC_BT2020_CL   = 10, ///< ITU-R BT2020 constant luminance system
-	AVCOL_SPC_SMPTE2085   = 11, ///< SMPTE 2085, Y'D'zD'x
-	AVCOL_SPC_CHROMA_DERIVED_NCL = 12, ///< Chromaticity-derived non-constant luminance system
-	AVCOL_SPC_CHROMA_DERIVED_CL = 13, ///< Chromaticity-derived constant luminance system
-	AVCOL_SPC_ICTCP       = 14, ///< ITU-R BT.2100-0, ICtCp
-	AVCOL_SPC_NB                ///< Not part of ABI
-};
-
-/**
-  * Chromaticity coordinates of the source primaries.
-  * These values match the ones defined by ISO/IEC 23001-8_2013 § 7.1.
-  */
-enum AVColorPrimaries {
-	AVCOL_PRI_RESERVED0   = 0,
-	AVCOL_PRI_BT709       = 1,  ///< also ITU-R BT1361 / IEC 61966-2-4 / SMPTE RP177 Annex B
-	AVCOL_PRI_UNSPECIFIED = 2,
-	AVCOL_PRI_RESERVED    = 3,
-	AVCOL_PRI_BT470M      = 4,  ///< also FCC Title 47 Code of Federal Regulations 73.682 (a)(20)
-
-	AVCOL_PRI_BT470BG     = 5,  ///< also ITU-R BT601-6 625 / ITU-R BT1358 625 / ITU-R BT1700 625 PAL & SECAM
-	AVCOL_PRI_SMPTE170M   = 6,  ///< also ITU-R BT601-6 525 / ITU-R BT1358 525 / ITU-R BT1700 NTSC
-	AVCOL_PRI_SMPTE240M   = 7,  ///< functionally identical to above
-	AVCOL_PRI_FILM        = 8,  ///< colour filters using Illuminant C
-	AVCOL_PRI_BT2020      = 9,  ///< ITU-R BT2020
-	AVCOL_PRI_SMPTE428    = 10, ///< SMPTE ST 428-1 (CIE 1931 XYZ)
-	AVCOL_PRI_SMPTEST428_1 = AVCOL_PRI_SMPTE428,
-	AVCOL_PRI_SMPTE431    = 11, ///< SMPTE ST 431-2 (2011) / DCI P3
-	AVCOL_PRI_SMPTE432    = 12, ///< SMPTE ST 432-1 (2010) / P3 D65 / Display P3
-	AVCOL_PRI_JEDEC_P22   = 22, ///< JEDEC P22 phosphors
-	AVCOL_PRI_NB                ///< Not part of ABI
-};
-
-/**
- * Color Transfer Characteristic.
- * These values match the ones defined by ISO/IEC 23001-8_2013 § 7.2.
- */
-enum AVColorTransferCharacteristic {
-	AVCOL_TRC_RESERVED0    = 0,
-	AVCOL_TRC_BT709        = 1,  ///< also ITU-R BT1361
-	AVCOL_TRC_UNSPECIFIED  = 2,
-	AVCOL_TRC_RESERVED     = 3,
-	AVCOL_TRC_GAMMA22      = 4,  ///< also ITU-R BT470M / ITU-R BT1700 625 PAL & SECAM
-	AVCOL_TRC_GAMMA28      = 5,  ///< also ITU-R BT470BG
-	AVCOL_TRC_SMPTE170M    = 6,  ///< also ITU-R BT601-6 525 or 625 / ITU-R BT1358 525 or 625 / ITU-R BT1700 NTSC
-	AVCOL_TRC_SMPTE240M    = 7,
-	AVCOL_TRC_LINEAR       = 8,  ///< "Linear transfer characteristics"
-	AVCOL_TRC_LOG          = 9,  ///< "Logarithmic transfer characteristic (100:1 range)"
-	AVCOL_TRC_LOG_SQRT     = 10, ///< "Logarithmic transfer characteristic (100 * Sqrt(10) : 1 range)"
-	AVCOL_TRC_IEC61966_2_4 = 11, ///< IEC 61966-2-4
-	AVCOL_TRC_BT1361_ECG   = 12, ///< ITU-R BT1361 Extended Colour Gamut
-	AVCOL_TRC_IEC61966_2_1 = 13, ///< IEC 61966-2-1 (sRGB or sYCC)
-	AVCOL_TRC_BT2020_10    = 14, ///< ITU-R BT2020 for 10-bit system
-	AVCOL_TRC_BT2020_12    = 15, ///< ITU-R BT2020 for 12-bit system
-	AVCOL_TRC_SMPTE2084    = 16, ///< SMPTE ST 2084 for 10-, 12-, 14- and 16-bit systems
-	AVCOL_TRC_SMPTEST2084  = AVCOL_TRC_SMPTE2084,
-	AVCOL_TRC_SMPTE428     = 17, ///< SMPTE ST 428-1
-	AVCOL_TRC_SMPTEST428_1 = AVCOL_TRC_SMPTE428,
-	AVCOL_TRC_ARIB_STD_B67 = 18, ///< ARIB STD-B67, known as "Hybrid log-gamma"
-	AVCOL_TRC_NB                 ///< Not part of ABI
-};
-#endif
-
 //fmt
 const char *av_color_space_name(enum AVColorSpace space);
 const char *av_color_primaries_name(enum AVColorPrimaries primaries);
@@ -160,6 +60,7 @@ const char *av_color_transfer_name(enum AVColorTransferCharacteristic transfer);
 
 //math
 int av_log2(u32 v);
+
 //bitstream
 int find_start_code(u8 *data, int data_sz);
 int calc_nal_len(u8 *data, int len);
diff --git a/drivers/common/media_clock/clk/clk.h b/drivers/common/media_clock/clk/clk.h
index 82eec1d..9e6c025 100644
--- a/drivers/common/media_clock/clk/clk.h
+++ b/drivers/common/media_clock/clk/clk.h
@@ -168,8 +168,5 @@ static void __exit vdec_clk_exit(void)
 #define ARCH_VDEC_CLK_EXIT()\
 		module_exit(vdec_clk_exit)
 
-MODULE_DESCRIPTION("AMLOGIC clk Driver");
-MODULE_LICENSE("GPL");
-
 #endif
 #endif
diff --git a/drivers/fake_video_out/fake_video.c b/drivers/fake_video_out/fake_video.c
index c175c92..586d350 100644
--- a/drivers/fake_video_out/fake_video.c
+++ b/drivers/fake_video_out/fake_video.c
@@ -1,22 +1,3 @@
-/*
-* Copyright (C) 2017 Amlogic, Inc. All rights reserved.
-*
-* This program is free software; you can redistribute it and/or modify
-* it under the terms of the GNU General Public License as published by
-* the Free Software Foundation; either version 2 of the License, or
-* (at your option) any later version.
-*
-* This program is distributed in the hope that it will be useful, but WITHOUT
-* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
-* FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
-* more details.
-*
-* You should have received a copy of the GNU General Public License along
-* with this program; if not, write to the Free Software Foundation, Inc.,
-* 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
-*
-* Description:
-*/
 #include <linux/version.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
diff --git a/drivers/frame_provider/decoder/utils/amvdec.c b/drivers/frame_provider/decoder/utils/amvdec.c
index 315c4a4..c37b473 100644
--- a/drivers/frame_provider/decoder/utils/amvdec.c
+++ b/drivers/frame_provider/decoder/utils/amvdec.c
@@ -1161,8 +1161,8 @@ static void __exit amvdec_exit(void)
 
 module_init(amvdec_init);
 module_exit(amvdec_exit);
+#endif
 
 MODULE_DESCRIPTION("Amlogic Video Decoder Utility Driver");
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Tim Yao <timyao@amlogic.com>");
-#endif
diff --git a/drivers/frame_provider/decoder/utils/utils.c b/drivers/frame_provider/decoder/utils/utils.c
index 0372a18..667b6f1 100644
--- a/drivers/frame_provider/decoder/utils/utils.c
+++ b/drivers/frame_provider/decoder/utils/utils.c
@@ -69,6 +69,3 @@ static void __exit decoder_common_exit(void)
 
 module_init(decoder_common_init);
 module_exit(decoder_common_exit);
-
-MODULE_DESCRIPTION("AMLOGIC decoder_common driver");
-MODULE_LICENSE("GPL");
\ No newline at end of file
diff --git a/drivers/frame_provider/decoder/utils/vdec_sync.c b/drivers/frame_provider/decoder/utils/vdec_sync.c
index 855b822..014b536 100644
--- a/drivers/frame_provider/decoder/utils/vdec_sync.c
+++ b/drivers/frame_provider/decoder/utils/vdec_sync.c
@@ -1,22 +1,3 @@
-/*
-* Copyright (C) 2017 Amlogic, Inc. All rights reserved.
-*
-* This program is free software; you can redistribute it and/or modify
-* it under the terms of the GNU General Public License as published by
-* the Free Software Foundation; either version 2 of the License, or
-* (at your option) any later version.
-*
-* This program is distributed in the hope that it will be useful, but WITHOUT
-* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
-* FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
-* more details.
-*
-* You should have received a copy of the GNU General Public License along
-* with this program; if not, write to the Free Software Foundation, Inc.,
-* 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
-*
-* Description:
-*/
 #include <linux/file.h>
 #include <linux/fs.h>
 #include <linux/uaccess.h>
diff --git a/drivers/frame_provider/decoder/utils/vdec_sync.h b/drivers/frame_provider/decoder/utils/vdec_sync.h
index fa07721..a57f0ab 100644
--- a/drivers/frame_provider/decoder/utils/vdec_sync.h
+++ b/drivers/frame_provider/decoder/utils/vdec_sync.h
@@ -1,22 +1,3 @@
-/*
-* Copyright (C) 2017 Amlogic, Inc. All rights reserved.
-*
-* This program is free software; you can redistribute it and/or modify
-* it under the terms of the GNU General Public License as published by
-* the Free Software Foundation; either version 2 of the License, or
-* (at your option) any later version.
-*
-* This program is distributed in the hope that it will be useful, but WITHOUT
-* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
-* FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
-* more details.
-*
-* You should have received a copy of the GNU General Public License along
-* with this program; if not, write to the Free Software Foundation, Inc.,
-* 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
-*
-* Description:
-*/
 #include <linux/list.h>
 #include <linux/rbtree.h>
 #include <linux/spinlock.h>
diff --git a/drivers/frame_provider/decoder/utils/vdec_v4l2_buffer_ops.c b/drivers/frame_provider/decoder/utils/vdec_v4l2_buffer_ops.c
index 6575097..2786cc4 100644
--- a/drivers/frame_provider/decoder/utils/vdec_v4l2_buffer_ops.c
+++ b/drivers/frame_provider/decoder/utils/vdec_v4l2_buffer_ops.c
@@ -1,22 +1,3 @@
-/*
-* Copyright (C) 2017 Amlogic, Inc. All rights reserved.
-*
-* This program is free software; you can redistribute it and/or modify
-* it under the terms of the GNU General Public License as published by
-* the Free Software Foundation; either version 2 of the License, or
-* (at your option) any later version.
-*
-* This program is distributed in the hope that it will be useful, but WITHOUT
-* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
-* FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
-* more details.
-*
-* You should have received a copy of the GNU General Public License along
-* with this program; if not, write to the Free Software Foundation, Inc.,
-* 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
-*
-* Description:
-*/
 #include "vdec_v4l2_buffer_ops.h"
 #include <media/v4l2-mem2mem.h>
 #include <linux/printk.h>
diff --git a/drivers/frame_provider/decoder/utils/vdec_v4l2_buffer_ops.h b/drivers/frame_provider/decoder/utils/vdec_v4l2_buffer_ops.h
index ddb46cb..bce2db6 100644
--- a/drivers/frame_provider/decoder/utils/vdec_v4l2_buffer_ops.h
+++ b/drivers/frame_provider/decoder/utils/vdec_v4l2_buffer_ops.h
@@ -1,22 +1,3 @@
-/*
-* Copyright (C) 2017 Amlogic, Inc. All rights reserved.
-*
-* This program is free software; you can redistribute it and/or modify
-* it under the terms of the GNU General Public License as published by
-* the Free Software Foundation; either version 2 of the License, or
-* (at your option) any later version.
-*
-* This program is distributed in the hope that it will be useful, but WITHOUT
-* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
-* FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
-* more details.
-*
-* You should have received a copy of the GNU General Public License along
-* with this program; if not, write to the Free Software Foundation, Inc.,
-* 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
-*
-* Description:
-*/
 #ifndef _AML_VDEC_V4L2_BUFFER_H_
 #define _AML_VDEC_V4L2_BUFFER_H_
 
diff --git a/drivers/frame_provider/decoder/vav1/aom_av1_define.h b/drivers/frame_provider/decoder/vav1/aom_av1_define.h
index 69e63f1..8a67885 100644
--- a/drivers/frame_provider/decoder/vav1/aom_av1_define.h
+++ b/drivers/frame_provider/decoder/vav1/aom_av1_define.h
@@ -1,22 +1,3 @@
-/*
-* Copyright (C) 2017 Amlogic, Inc. All rights reserved.
-*
-* This program is free software; you can redistribute it and/or modify
-* it under the terms of the GNU General Public License as published by
-* the Free Software Foundation; either version 2 of the License, or
-* (at your option) any later version.
-*
-* This program is distributed in the hope that it will be useful, but WITHOUT
-* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
-* FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
-* more details.
-*
-* You should have received a copy of the GNU General Public License along
-* with this program; if not, write to the Free Software Foundation, Inc.,
-* 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
-*
-* Description:
-*/
 enum NalUnitType
 {
   NAL_UNIT_CODED_SLICE_TRAIL_N = 0,   // 0
diff --git a/drivers/frame_provider/decoder/vav1/av1_bufmgr.c b/drivers/frame_provider/decoder/vav1/av1_bufmgr.c
index abd14a1..0e983c9 100644
--- a/drivers/frame_provider/decoder/vav1/av1_bufmgr.c
+++ b/drivers/frame_provider/decoder/vav1/av1_bufmgr.c
@@ -1,22 +1,3 @@
-/*
-* Copyright (C) 2017 Amlogic, Inc. All rights reserved.
-*
-* This program is free software; you can redistribute it and/or modify
-* it under the terms of the GNU General Public License as published by
-* the Free Software Foundation; either version 2 of the License, or
-* (at your option) any later version.
-*
-* This program is distributed in the hope that it will be useful, but WITHOUT
-* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
-* FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
-* more details.
-*
-* You should have received a copy of the GNU General Public License along
-* with this program; if not, write to the Free Software Foundation, Inc.,
-* 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
-*
-* Description:
-*/
 #ifndef CONFIG_AMLOGIC_MEDIA_MULTI_DEC
 #include <stdio.h>
 #include <stdlib.h>
diff --git a/drivers/frame_provider/decoder/vav1/av1_global.h b/drivers/frame_provider/decoder/vav1/av1_global.h
index 4583a7c..d95bcd5 100644
--- a/drivers/frame_provider/decoder/vav1/av1_global.h
+++ b/drivers/frame_provider/decoder/vav1/av1_global.h
@@ -1,22 +1,3 @@
-/*
-* Copyright (C) 2017 Amlogic, Inc. All rights reserved.
-*
-* This program is free software; you can redistribute it and/or modify
-* it under the terms of the GNU General Public License as published by
-* the Free Software Foundation; either version 2 of the License, or
-* (at your option) any later version.
-*
-* This program is distributed in the hope that it will be useful, but WITHOUT
-* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
-* FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
-* more details.
-*
-* You should have received a copy of the GNU General Public License along
-* with this program; if not, write to the Free Software Foundation, Inc.,
-* 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
-*
-* Description:
-*/
 #ifndef AV1_GLOBAL_H_
 #define AV1_GLOBAL_H_
 #define AOM_AV1_MMU_DW
diff --git a/drivers/frame_sink/encoder/jpeg/jpegenc.h b/drivers/frame_sink/encoder/jpeg/jpegenc.h
index 61062fb..0d86f7b 100644
--- a/drivers/frame_sink/encoder/jpeg/jpegenc.h
+++ b/drivers/frame_sink/encoder/jpeg/jpegenc.h
@@ -1,19 +1,3 @@
-/*
- * drivers/amlogic/amports/jpegenc.h
- *
- * Copyright (C) 2015 Amlogic, Inc. All rights reserved.
- *
- * This program is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful, but WITHOUT
- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
- * more details.
- *
-*/
 #ifndef __JPEG_ENC_H_
 #define __JPEG_ENC_H_
 
diff --git a/drivers/stream_input/parser/dvb_ci/aml_pcmcia.c b/drivers/stream_input/parser/dvb_ci/aml_pcmcia.c
index e84f376..6b9def8 100644
--- a/drivers/stream_input/parser/dvb_ci/aml_pcmcia.c
+++ b/drivers/stream_input/parser/dvb_ci/aml_pcmcia.c
@@ -1,22 +1,4 @@
-/*
-* Copyright (C) 2017 Amlogic, Inc. All rights reserved.
-*
-* This program is free software; you can redistribute it and/or modify
-* it under the terms of the GNU General Public License as published by
-* the Free Software Foundation; either version 2 of the License, or
-* (at your option) any later version.
-*
-* This program is distributed in the hope that it will be useful, but WITHOUT
-* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
-* FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
-* more details.
-*
-* You should have received a copy of the GNU General Public License along
-* with this program; if not, write to the Free Software Foundation, Inc.,
-* 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
-*
-* Description:
-*/
+
 #include <linux/kernel.h>
 #include <linux/sched.h>
 #include <linux/interrupt.h>
diff --git a/drivers/stream_input/parser/dvb_ci/cimax/usb/SRC/cimax+usb-driver.c b/drivers/stream_input/parser/dvb_ci/cimax/usb/SRC/cimax+usb-driver.c
index a941326..43cdcde 100644
--- a/drivers/stream_input/parser/dvb_ci/cimax/usb/SRC/cimax+usb-driver.c
+++ b/drivers/stream_input/parser/dvb_ci/cimax/usb/SRC/cimax+usb-driver.c
@@ -2533,4 +2533,3 @@ static void device_exit_module(void)
 
 module_init(device_init_module);
 module_exit(device_exit_module);
-MODULE_LICENSE("GPL");
-- 
2.17.1

