From c5e57edd18b1af696114338a135055e8f45887ec Mon Sep 17 00:00:00 2001
From: "haotian.qu" <haotian.qu@amlogic.com>
Date: Thu, 9 Nov 2023 17:46:57 +0800
Subject: [PATCH 04/14] aml_swupdate_ui: Compile output to the build directory.
 [1/3]

PD#SWPL-145434

Problem:
The compiled files should be placed in the build directory.

Solution:
Add a new output directory param to depositing the
compiled files

Verify:
local PB

Signed-off-by: haotian.qu <haotian.qu@amlogic.com>
Change-Id: I4b97bdb943fb88e5fd0c7609362f47d1de189a5f
---
 recipes-core/swupdate/aml-swupdate-ui_git.bb | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/recipes-core/swupdate/aml-swupdate-ui_git.bb b/recipes-core/swupdate/aml-swupdate-ui_git.bb
index dcfdc12c..1b25d295 100644
--- a/recipes-core/swupdate/aml-swupdate-ui_git.bb
+++ b/recipes-core/swupdate/aml-swupdate-ui_git.bb
@@ -15,7 +15,7 @@ PV = "${SRCPV}"
 S = "${WORKDIR}/git"
 
 # configurate lvgl app needs below two conditions
-EXTRA_OEMAKE = "${@bb.utils.contains("SWUPDATE_UI_LIB", "lvgl", "CONFIG_LVGL_APP=y", "" ,d)}"
+EXTRA_OEMAKE += "${@bb.utils.contains("SWUPDATE_UI_LIB", "lvgl", "CONFIG_LVGL_APP=y", "" ,d)} OUT_DIR=${B} "
 PACKAGECONFIG_append += "${@bb.utils.contains("SWUPDATE_UI_LIB", "lvgl", " lvgl", " directfb" ,d)}"
 PACKAGECONFIG[lvgl] = "-lvgl,-no-lvgl,lvgl lv-drivers"
 PACKAGECONFIG[directfb] = "-directfb,-no-directfb,directfb"
@@ -26,7 +26,7 @@ do_compile(){
 
 do_install() {
     install -d ${D}${bindir}
-    install -m 0755 ${S}/swupdateui ${D}${bindir}
+    install -m 0755 ${B}/swupdateui ${D}${bindir}
 
     install -d ${D}${sysconfdir}
     case ${PACKAGECONFIG} in
-- 
2.25.1

